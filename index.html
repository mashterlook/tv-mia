<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub de Canales y Radio</title>
    <style>
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(to bottom,#1a1a1a,#222);color:#eee;margin:0;padding:0;display:flex;min-height:100vh;position:relative;overflow-x:hidden}
        .left-panel{width:300px;background:#282828;padding:20px;box-sizing:border-box;display:flex;flex-direction:column;position:fixed;height:100%;overflow-y:auto;border-right:1px solid #383838}
        .right-panel{margin-left:300px;flex-grow:1;padding:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}
        .video-container{width:100%;max-width:960px;margin-bottom:20px;border:1px solid #383838;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.3);background:#222;aspect-ratio:16/9;position:relative}
        .hamburger-menu{display:none}
        #player-iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:none}
        .info-bar{display:flex;align-items:center;justify-content:center;margin-bottom:20px;gap:15px}
        #channel-name-display{font-weight:bold;font-size:1.2rem;color:#00c7ff;display:none}
        #guide-button{display:none;background:#00c7ff;color:#222;font-weight:bold;border:none;padding:10px 20px;border-radius:20px;cursor:pointer}
        #guide-button:hover{background:#00a7db}
        .search-container{display:flex;align-items:center;background:#333;border-radius:25px;padding:8px 15px;margin-bottom:25px}
        .search-container input{flex-grow:1;background:transparent;border:none;color:#ddd;padding:10px 12px;outline:none;font-size:0.9rem}
        .search-container input::placeholder{color:#777}
        .tab-button{padding:10px 18px;background:#444;color:#ddd;border-radius:20px;cursor:pointer;font-weight:bold;transition:0.2s;text-align:center;border:none;font-size:1.1rem}
        .tab-button:hover,.tab-button.active{background:#00c7ff;color:#222}
        .channel-list-container{display:none;flex-direction:column;gap:8px;padding-left:15px;margin-top:8px}
        .channel-list-container.active{display:flex}
        .channel-button{background:#333;border:1px solid #444;border-radius:20px;padding:8px 12px;cursor:pointer;font-weight:bold;color:#ddd;transition:0.2s;display:flex;justify-content:space-between;align-items:center}
        .channel-button:hover{background:#444;transform:scale(1.02)}
        .favorite-star{font-size:1rem;cursor:pointer;color:#777;transition:0.2s;margin-left:10px}
        .favorite-star.is-favorite{color:#ffdd57}
        .password-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;justify-content:center;align-items:center}
        .password-box{background:#333;padding:30px;border-radius:10px;text-align:center;max-width:350px;width:90%;color:#eee}
        .password-box input{width:85%;padding:12px;margin:15px 0;border-radius:5px;border:none;background:#444;color:#ddd}
        .password-box button{background:#00c7ff;color:#222;padding:10px 25px;border:none;border-radius:5px;cursor:pointer;font-weight:bold}
        .error-message{color:#ff7777;margin-top:10px;display:none}
        @media (max-width:768px){
            .left-panel{width:100%;left:-100%;transition:0.3s;z-index:1000;padding-top:60px}
            .left-panel.active{left:0}
            .right-panel{margin-left:0;padding:10px}
            .hamburger-menu{display:block;position:fixed;top:15px;left:15px;z-index:1001;background:#444;color:#eee;border:none;border-radius:5px;padding:10px 12px;font-size:1.4rem;cursor:pointer}
        }
    </style>
</head>
<body>

<button id="hamburgerBtn" class="hamburger-menu">Menu</button>

<aside class="left-panel">
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Buscar canal o radio...">
        <button>Search</button>
    </div>

    <!-- Tus categorías normales aquí (NACIONALES, INFANTIL, etc.) -->
    <!-- ... (las dejo igual que tenías, solo cambio la sección ADULTO más abajo) ... -->

    <div class="category-item">
        <div class="tab-button" data-tab="tab7" tabindex="0">ADULTO</div>
        <div id="tab7" class="channel-list-container">
            <!-- PROXY INTEGRADO → todas las URLs pasan por data-proxy -->
            <div class="channel-button" data-proxy="https://hochu.tv/brazzers-tv-europe.html" data-name="Brazzers TV Europe"><span class="channel-name">Brazzers TV Europe</span><i class="fa-regular fa-star favorite-star"></i></div>
            <div class="channel-button" data-proxy="https://hochu.tv/o-la-la.html" data-name="Reloj O-la-la"><span class="channel-name">Reloj O-la-la</span><i class="fa-regular fa-star favorite-star"></i></div>
            <div class="channel-button" data-proxy="https://hochu.tv/hustler-hd.html" data-name="Hustler HD"><span class="channel-name">Hustler HD</span><i class="fa-regular fa-star favorite-star"></i></div>
            <div class="channel-button" data-proxy="https://hochu.tv/blue-hustler.html" data-name="Blue Hustler"><span class="channel-name">Blue Hustler</span><i class="fa-regular fa-star favorite-star"></i></div>
            <div class="channel-button" data-proxy="https://hochu.tv/private-tv.html" data-name="Private TV"><span class="channel-name">Private TV</span><i class="fa-regular fa-star favorite-star"></i></div>
            <div class="channel-button" data-proxy="https://hochu.tv/penthouse-1.html" data-name="Penthouse Gold"><span class="channel-name">Penthouse Gold</span><i class="fa-regular fa-star favorite-star"></i></div>
            <div class="channel-button" data-proxy="https://hochu.tv/playboy-tv.html" data-name="Playboy"><span class="channel-name">Playboy</span><i class="fa-regular fa-star favorite-star"></i></div>
            <!-- Añade aquí todos los demás que quieras, solo cambia la URL de hochu.tv -->
        </div>
    </div>
</aside>

<main class="right-panel">
    <div class="info-bar">
        <span id="channel-name-display"></span>
        <button id="guide-button">Ver Guía</button>
    </div>
    <div id="player-container" class="video-container">
        <iframe id="player-iframe" src="" allowfullscreen sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
    </div>
</main>

<!-- Modal contraseña -->
<div id="passwordModal" class="password-modal">
    <div class="password-box">
        <h2>Acceso Contenido Adulto</h2>
        <p>Ingresa la contraseña:</p>
        <input type="password" id="passwordInput" placeholder="Contraseña">
        <button onclick="checkPass()">Acceder</button>
        <div id="errorMessage" class="error-message">Contraseña incorrecta</div>
    </div>
</div>

<script>
// ====== PROXY INTEGRADO (magia negra pero 100% funcional) ======
function proxyHochu(url, callback) {
    const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
    fetch(proxyUrl)
        .then(r => r.text())
        .then(html => {
            // Quitamos las protecciones anti-iframe
            html = html
                .replace(/X-Frame-Options: .*/gi, '')
                .replace(/frame-ancestors .*/gi, '')
                .replace(/<head>/i, '<head><meta http-equiv="X-Frame-Options" content="ALLOWALL">');
            const blob = new Blob([html], {type: 'text/html'});
            callback(URL.createObjectURL(blob));
        })
        .catch(() => {
            document.getElementById('player-iframe').src = url; // fallback directo
        });
}
// ==============================================================

let accesoAdulto = false;
const iframe = document.getElementById('player-iframe');
const modal = document.getElementById('passwordModal');

document.querySelector('.left-panel').addEventListener('click', e => {
    const canal = e.target.closest('.channel-button');
    const tab = e.target.closest('.tab-button');
    const star = e.target.closest('.favorite-star');

    if (star) { e.stopPropagation(); return; } // favoritos (opcional)

    if (tab && tab.dataset.tab === 'tab7' && !accesoAdulto) {
        modal.style.display = 'flex';
        document.getElementById('passwordInput').focus();
        return;
    }

    if (canal) {
        const proxyUrl = canal.dataset.proxy;
        const normalUrl = canal.dataset.url;
        const name = canal.dataset.name || canal.textContent.trim();

        document.getElementById('channel-name-display').textContent = name;
        document.getElementById('channel-name-display').style.display = 'block';

        if (proxyUrl) {
            // Usamos el proxy integrado para hochu.tv
            proxyHochu(proxyUrl, src => {
                iframe.src = src;
            });
        } else if (normalUrl) {
            iframe.src = normalUrl;
        }
    }
});

function checkPass() {
    if (document.getElementById('passwordInput').value === 'look') { // Cambia "look" si quieres otra contraseña
        accesoAdulto = true;
        modal.style.display = 'none';
        document.querySelector('[data-tab="tab7"]').click();
    } else {
        document.getElementById('errorMessage').style.display = 'block';
    }
}

// Cerrar modal con Escape o clic fuera
modal.addEventListener('click', e => { if (e.target === modal) modal.style.display = 'none'; });
document.addEventListener('keydown', e => { if (e.key === 'Escape') modal.style.display = 'none'; });

// Menú hamburguesa móvil
document.getElementById('hamburgerBtn').addEventListener('click', () => {
    document.querySelector('.left-panel').classList.toggle('active');
});
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</body>
</html>
